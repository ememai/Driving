{% extends "base.html" %} {% block title %}Subscription{% endblock %} 
{% block content %}
<h1>Manage Your Subscription</h1>
{% if subscription.is_active %}
<p>Your subscription is active until {{ subscription.end_date }}.</p>
{% else %}
<p>You currently do not have an active subscription.</p>
{% endif %}
<div class="container mt-5">
  <h2 class="text-center">Subscription Plans</h2>
  <p class="text-center">Choose a plan to subscribe and enjoy unlimited access to exams.</p>

  {% if messages %}
      <div class="alert-messages">
          {% for message in messages %}
              <div class="alert {{ message.tags }}">{{ message }}</div>
          {% endfor %}
      </div>
  {% endif %}

  <form method="post" action="{% url 'subscription' %}" class="mt-4">
      {% csrf_token %}
      <div class="form-group">
          <label for="plan">Select Plan:</label>
          <select class="form-control" id="plan" name="plan" required>
              <option value="" disabled selected>Select a plan</option>
              <option value="monthly">Monthly Plan - $10</option>
              <option value="yearly">Yearly Plan - $100</option>
          </select>
      </div>

      <div class="form-group mt-3">
          <label for="phone_number">Enter Phone Number:</label>
          <input 
              type="text" 
              class="form-control" 
              id="phone_number" 
              name="phone_number" 
              placeholder="e.g., 2507XXXXXXXX" 
              required 
              pattern="\d{12}" 
              title="Enter a valid 12-digit phone number starting with country code (e.g., 2507XXXXXXXX)">
      </div>

      <div class="form-group text-center mt-4">
          <button type="submit" class="btn btn-primary">Subscribe Now</button>
      </div>
  </form>

  <div class="mt-4 text-center">
      <p>Already subscribed? <a href="{% url 'home' %}">Go to your home</a>.</p>
  </div>
</div>
{% endblock %}
