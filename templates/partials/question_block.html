{% load static custom_filters %}
<form method="POST" id="examForm" class="p-4 shadow-lg">
  {% csrf_token %}
  <input type="hidden" name="go_to" id="goToInput">
  <input type="hidden" name="question_id" value="{{ question.id }}">
  <div class="mb-5">
    <p class="fs-1 d-none d-md-block">{{ question_number }}. {{ question.question_text }}</p>
    <p class="fs-3 d-block d-md-none">{{ question_number }}. {{ question.question_text }}</p>
  </div>

  {% if question.question_sign %}
    <div class="mt-2 mb-4 text-center ">
      <img src="{{ question.question_sign.sign_image.url }}" alt="Amategeko y'umuhanda - Ibimenyetso by'umuhanda" class="img-thumbnail q-sign">
    </div>
  {% endif %}

  <fieldset class="mt-5 mb-4 ">

    {% for choice in choices %}
    <div class="form-check mb-3 border p-2 rounded-3 border-secondary" title="Hitampo '{{ forloop.counter0|letter }}' nk'igisubizo cy'ukuri">
      <input class="form-check-input " type="radio" name="answer" id="choice-{{ choice.id }}" value="{{ choice.id }}"
             {% if choice.id|stringformat:"s" == request.session.answers|get:question.id %}checked{% endif %}>
      <label class="form-check-label d-flex align-items-start" for="choice-{{ choice.id }}">
        <span class="fs-2 me-2">{{ forloop.counter0|letter }})</span>
        {% if choice.type == 'text' %}
        <span class="fs-3">{{ choice.content }}</span>
        {% elif choice.type == 'image' %}
        <img src="{{ choice.content }}" alt="Amategeko y'umuhanda - Ibyapa" class="img-thumbnail me-2" style="max-width: 30vw; height: auto;">

        {% endif %}
      </label>
    </div>
    {% endfor %}
  </fieldset>

  <div class="d-flex justify-content-between">
    <button type="button" class="btn btn-secondary" id="prevBtn" {% if question_number == 1 %}disabled{% endif %} title="Subira ku kibazo cya {{ question_number|add:-1 }}">Subira inyuma</button>


    {% if question_number < total_questions %}
    <button type="button" class="btn btn-primary" id="nextBtn" title="Komeza ku kibazo cya {{ question_number|add:1 }}">Next</button>
    {% else %}
    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#submitModal" id="submitExamBtn" title="Soza ikizamini urebe amanota">
      Soza ikizamini
    </button>
    {% endif %}
  </div>
</form>
