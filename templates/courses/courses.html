{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Courses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <style>
      .course-card {
        transition: all 0.3s ease;
      }
      .course-card:hover {
        transform: translateY(-2px);
      }
      @media (max-width: 640px) {
        .course-card:hover {
          transform: none;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen text-base sm:text-lg">
    <!-- Mobile Header -->
    <div class="sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-6xl mx-auto px-4 py-3">
        <div class="flex items-center justify-between">
          <a
            href="{% url 'home' %}"
            class="flex items-center text-blue-600 hover:text-blue-800 transition-colors p-2 -m-2 rounded-lg hover:bg-blue-50"
          >
            <i class="bi bi-arrow-left text-xl mr-2"></i>
            <span class="font-medium hidden sm:inline">Subira Ahabanza</span>
            <span class="font-medium sm:hidden">Back</span>
          </a>
          <h1 class="text-lg sm:text-xl font-bold text-gray-800">Amasomo</h1>
          <div class="w-10"></div>
          <!-- Spacer for centering -->
        </div>
      </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 py-6 sm:py-8">
      <!-- Search Form - Mobile Optimized -->
      <div class="mb-6">
        <form method="get" class="relative">
          <div class="relative">
            <i
              class="bi bi-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"
            ></i>
            <input
              type="text"
              name="q"
              value="{{ query }}"
              placeholder="Shakisha amasomo..."
              class="w-full pl-12 pr-4 py-4 text-base rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm bg-white"
            />
          </div>
          {% if query %}
          <div class="mt-2 flex items-center justify-between">
            <span class="text-sm text-gray-600"
              >Search results for: <strong>"{{ query }}"</strong></span
            >
            <a
              href="{% url 'courses' %}"
              class="text-sm text-blue-600 hover:text-blue-800"
              >Siba</a
            >
          </div>
          {% endif %}
        </form>
      </div>

      <!-- Course List - Enhanced Mobile Layout -->
      {% if courses %}
      <div class="mb-4 flex items-center justify-between">
        <p class="text-sm text-gray-600">
          <i class="bi bi-book mr-1"></i>
          Amasomo ahari {{ courses|length }}
        </p>
        {% if query %}
        <p class="text-sm text-gray-600">
          Habonetse {{ courses|length }} 
          {% comment %} result{{ courses|length|pluralize }} {% endcomment %}
        </p>
        {% endif %}
      </div>

      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"
      >
        {% for course in courses %}
        <div
          class="course-card bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300"
        >
          <a href="{% url 'course_detail' course.slug %}" class="block">
            {% if course.thumbnail %}
            <div class="aspect-video overflow-hidden">
              <img
                src="{{ course.thumbnail.url }}"
                alt="{{ course.title }}"
                class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                loading="lazy"
              />
            </div>
            {% else %}
            <div
              class="aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center"
            >
              <i class="bi bi-book text-4xl sm:text-5xl text-blue-400"></i>
            </div>
            {% endif %}

            <div class="p-4 sm:p-3">
              <h2
                class="text-lg sm:text-xl font-semibold text-gray-900 mb-2 line-clamp-2 leading-tight"
              >
                {{ course.title }}
              </h2>
              <div class="mb-2 flex items-center space-x-2">
                <span
                  class="inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"
                >
                  {{ course.category }}
                </span>
              </div>

              
              {% if course.description %}
              <p
                class="text-sm sm:text-base text-gray-600 mb-4 line-clamp-2 leading-relaxed"
              >
                {{ course.description|safe|truncatewords:20 }}
              </p>
              {% endif %}

              <div class="flex items-center justify-end group hover:underline mt-2">
                <span
                  class="text-sm font-medium text-blue-600 group-hover:text-blue-700 transition-colors"
                >
                  Fungura
                  <i class="bi bi-chevron-right text-gray-400 text-sm"></i>
                </span>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>

      {% else %}
      <div class="text-center py-12 sm:py-16">
        <div class="max-w-md mx-auto">
          <i class="bi bi-search text-6xl sm:text-7xl text-gray-300 mb-4"></i>
          <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-2">
            {% if query %}Nta amasomo abonetse{% else %}Nta amasomo abonetse{% endif  %}
          </h3>
          <p class="text-gray-600 mb-6">
            {% if query %} Gerageze guhindura ibyo wanditse {% else %} Check back later for new courses. {%
            endif %}
          </p>
          {% if query %}
          <a
            href="{% url 'courses' %}"
            class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          >
            <i class="bi bi-grid mr-2"></i>
            Reba amasomo yose
          </a>
          {% endif %}
        </div>
      </div>
      {% endif %}
    </div>
    {% endif %}

    
  </body>
</html>
